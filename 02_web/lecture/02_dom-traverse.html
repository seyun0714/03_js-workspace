<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- 
      📌 노드 탐색
      동일한 이벤트를 여러 요소에 걸어놓았을때, 이벤트가 발생한 요소 기준으로 특정 요소를 찾아야 할때 자주 사용

    1. 특정 노드 취득 후 취득한 요소 기준으로 DOM 트리의 노드를 옮겨 다니며 부모, 형제, 자식 노드를 탐색하는 방법
    2. Node, Element 에서 탐색을 위한 프로퍼티를 제공함 
    3. 주요 노드 종류
      1) 텍스트 노드 (Text Node)  : 태그 사이에 정의되어 있는 텍스트 데이터 
      2) 요소 노드 (Element Node) : 태그로 이루어진 요소 
    4. 유의 사항
      요소 사이의 스페이스, 탭, 줄바꿈(개행) 등의 공백 문자는 텍스트 노드를 생성함 
      ex) <div>
            <h1>안녕</h1>
          </div>

          요소 노드 : <div>
            → 텍스트노드("\n")
            → 요소노드(<h1></h1>)
               → 텍스트노드("안녕") 
            → 텍스트노드("\n") 
  -->

    <!-- 
    * 자식 노드 탐색 
    1. Node.prototype.childNodes : 자식 노드(요소 노드, 텍스트 노드)를 탐색하여 NodeList에 담아 반환 
    2. Node.prototype.firstChild : 첫번째 자식 노드(요소 노드, 텍스트 노드) 반환 
    3. Node.prototype.lastChild  : 마지막 자식 노드(요소 노드, 텍스트 노드) 반환 
    4. Element.prototype.children : 자식 노드 중 요소 노드만 탐색하여 HTMLCollection에 담아 반환
    5. Element.prototype.firstElementChild : 첫번째 자식 요소 노드 반환 
    6. Element.prototype.lastElementChild  : 마지막 자식 요소 노드 반환 

    * 부모 노드 탐색 
    1. Node.prototype.parentNode : 부모 노드(요소 노드, 텍스트 노드)를 탐색하여 반환
    2. Node.prototype.parentElement : 부모 노드(요소 노드)를 탐색하여 반환

    * 형제 노드 탐색 
    1. Node.prototype.previousSibling : 형제 노드 중 자신의 이전 형제 노드(요소노드, 텍스트노드)를 탐색하여 반환
    2. Node.prototype.nextSibling : 형제 노드 중 자신의 다음 형제 노드(요소노드, 텍스트노드)를 탐색하여 반환
    3. Element.prototype.previousElementSibling : 형제 요소 노드 중 자신의 이전 형제 요소 노드를 탐색하여 반환
    4. Element.prototype.nextElementSibling : 형제 요소 노드 중 자신의 다음 형제 요소 노드를 탐색하여 반환
  -->

    <h2>노드 탐색</h2>

    <ul id="test">
      <li class="coffee">커피</li>
      <li class="coke">콜라</li>
      <li class="milk">우유</li>
    </ul>

    <button onclick="childNodeTraversing();">자식노드 탐색</button>
    <button onclick="parentNodeTraversing();">부모노드 탐색</button>
    <button onclick="siblingNodeTraversing();">형제노드 탐색</button>

    <script>
      function childNodeTraversing() {
        // DOM 객체를 담는 변수명에 관용적으로 앞에 "$"를 붙임
        const $test = document.querySelector("#test");
        console.log($test.childNodes); // element 노드, text 노드 포함
        console.log($test.children); // element 노드만 포함 <주로 사용>

        console.log($test.firstChild); // element 노드, text 노드 포함
        console.log($test.firstElementChild); // element 노드만 포함 <주로 사용>

        console.log($test.lastChild); // element 노드, text 노드 포함
        console.log($test.lastElementChild); // element 노드만 포함 <주로 사용>
      }

      function parentNodeTraversing() {
        const $coke = document.querySelector(".coke");

        console.log($coke.parentNode); // text 노드도 포함됨
        console.log($coke.parentElement); // element 요소만 포함 <안전하게 이걸 사용>

        // closest(selector): 상위 요소들 중에 해당 선택자에 만족하는 가장 가까운 상위요소 선택
        console.log($coke.closest("body"));
      }

      function siblingNodeTraversing() {
        const $coke = document.querySelector(".coke");
        console.log($coke.previousSibling); // text 노드도 포함됨
        console.log($coke.previousElementSibling); // element 노드만 찾음

        console.log($coke.nextSibling); // text 노드도 포함됨
        console.log($coke.nextElementSibling); // element 노드만 찾음
      }
    </script>
  </body>
</html>
